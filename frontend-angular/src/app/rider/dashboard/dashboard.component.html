<div class="container">
    <mat-card>
        <mat-card-header>
            <mat-card-title>Request a Ride</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="rideForm" (ngSubmit)="onSubmit()">
                <mat-form-field appearance="fill" class="full-width">
                    <mat-label>Pickup Station</mat-label>
                    <mat-select formControlName="stationId">
                        <mat-option *ngFor="let station of stations" [value]="station.id">
                            {{ station.name }}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="rideForm.get('stationId')?.hasError('required')">
                        Pickup Station is required
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill" class="full-width">
                    <mat-label>Destination Area</mat-label>
                    <mat-select formControlName="destinationId">
                        <mat-option *ngFor="let area of destinations" [value]="area.id">
                            {{ area.name }}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="rideForm.get('destinationId')?.hasError('required')">
                        Destination is required
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="fill" class="full-width">
                    <mat-label>Number of Passengers</mat-label>
                    <mat-select formControlName="partySize">
                        <mat-option [value]="1">1</mat-option>
                        <mat-option [value]="2">2</mat-option>
                        <mat-option [value]="3">3</mat-option>
                        <mat-option [value]="4">4</mat-option>
                    </mat-select>
                </mat-form-field>

                <div class="offset-slider">
                    <label>Arrival Time Offset (Minutes): {{ rideForm.get('offsetMinutes')?.value }}</label>
                    <input type="range" min="0" max="30" step="5" formControlName="offsetMinutes">
                </div>

                <button mat-raised-button color="primary" type="submit" [disabled]="rideForm.invalid || loading">
                    {{ loading ? 'Requesting...' : 'Request Ride' }}
                </button>
            </form>
        </mat-card-content>
    </mat-card>
</div>